<!DOCTYPE html>
<html>
<head>
    <title>Test Photo Upload</title>
</head>
<body>
    <h1>Test Workplace Photo Upload</h1>
    
    <div>
        <label>Job ID:</label>
        <input type="text" id="jobId" placeholder="Enter job ID" style="width: 300px;">
    </div>
    
    <div style="margin-top: 10px;">
        <label>Token:</label>
        <input type="text" id="token" placeholder="Enter your JWT token" style="width: 300px;">
    </div>
    
    <div style="margin-top: 10px;">
        <label>Photos (1-3):</label>
        <input type="file" id="photos" accept="image/*" multiple>
    </div>
    
    <button onclick="uploadPhotos()" style="margin-top: 10px;">Upload Photos</button>
    
    <div id="result" style="margin-top: 20px; white-space: pre-wrap;"></div>

    <script>
        async function uploadPhotos() {
            const jobId = document.getElementById('jobId').value;
            const token = document.getElementById('token').value;
            const files = document.getElementById('photos').files;
            const resultDiv = document.getElementById('result');
            
            if (!jobId) {
                resultDiv.textContent = 'Please enter Job ID';
                return;
            }
            
            if (!token) {
                resultDiv.textContent = 'Please enter Token';
                return;
            }
            
            if (files.length === 0) {
                resultDiv.textContent = 'Please select photos';
                return;
            }
            
            resultDiv.textContent = 'Uploading...';
            
            const formData = new FormData();
            for (let i = 0; i < Math.min(files.length, 3); i++) {
                formData.append('photos', files[i]);
                console.log('Adding file:', files[i].name, files[i].type, files[i].size);
            }
            
            try {
                const response = await fetch(`https://aow-jobapp-backend.onrender.com/api/jobs/${jobId}/photos`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    },
                    body: formData
                });
                
                const data = await response.json();
                
                resultDiv.textContent = `Status: ${response.status}\n\n` + JSON.stringify(data, null, 2);
                
                if (response.ok) {
                    resultDiv.style.color = 'green';
                } else {
                    resultDiv.style.color = 'red';
                }
            } catch (error) {
                resultDiv.textContent = 'Error: ' + error.message;
                resultDiv.style.color = 'red';
            }
        }
    </script>
</body>
</html>
